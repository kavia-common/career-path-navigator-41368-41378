{"is_source_file": true, "format": "Python", "description": "This file contains a SQLite database helper module with functions to manage schema creation, database connection handling, and CRUD operations for user, job, and progress data. It abstracts interactions with the SQLite database, including schema initialization, data fetching, and insertion, specifically tailored for a backend component.", "external_files": ["src.core.config"], "external_methods": ["get_settings"], "published": ["reset_users_table", "auth_get_user_by_email", "auth_get_user_by_id", "auth_insert_user"], "classes": [], "methods": [{"name": "None _ensure_schema(conn: sqlite3.Connection)", "description": "Creates necessary database tables if they do not exist, including dedicated 'auth_users', 'jobs', and 'progress' tables with appropriate fields and foreign key constraints.", "scope": "", "scopeKind": ""}, {"name": "get_conn()", "description": "Context manager that sets up a connection to the SQLite database, ensures schema creation, and properly closes the connection.", "scope": "", "scopeKind": ""}, {"name": "list[dict[str,Any]] fetch_all(conn: sqlite3.Connection, query: str, params: Iterable[Any])", "description": "Executes a query to fetch multiple records as a list of dictionaries.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict[str,Any]] fetch_one(conn: sqlite3.Connection, query: str, params: Iterable[Any])", "description": "Executes a query to fetch a single record as a dictionary.", "scope": "", "scopeKind": ""}, {"name": "None execute(conn: sqlite3.Connection, query: str, params: Iterable[Any])", "description": "Executes a SQL statement (INSERT, UPDATE, DELETE) and commits the transaction.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict[str,Any]] auth_get_user_by_email(conn: sqlite3.Connection, email_norm: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[dict[str,Any]] auth_get_user_by_id(conn: sqlite3.Connection, user_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None auth_insert_user(conn: sqlite3.Connection, rec: dict[str, Any])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None reset_users_table()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_settings", "Path", "conn.executescript", "conn.commit", "conn.execute", "conn.row_factory", "conn.execute", "conn.close"], "search-terms": ["sqlite3 schema", "auth_users table", "database connection context", "CRUD operations", "user fetch by email", "user fetch by id", "insert user"], "state": 2, "file_id": 23, "knowledge_revision": 138, "git_revision": "2661c6d7672c9073e4980e5e544b3a290195f715", "revision_history": [{"47": ""}, {"79": "d817588e91a0e451b431ebba83282289df8bb429"}, {"95": "d817588e91a0e451b431ebba83282289df8bb429"}, {"112": "8d2fef9dcd384bf1eeea0e797e0b340f13f5780e"}, {"128": "8d2fef9dcd384bf1eeea0e797e0b340f13f5780e"}, {"133": "8d2fef9dcd384bf1eeea0e797e0b340f13f5780e"}, {"138": "2661c6d7672c9073e4980e5e544b3a290195f715"}], "ctags": [{"_type": "tag", "name": "_ensure_schema", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def _ensure_schema(conn: sqlite3.Connection) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection)"}, {"_type": "tag", "name": "auth_get_user_by_email", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def auth_get_user_by_email(conn: sqlite3.Connection, email_norm: str) -> Optional[dict[str, Any]/", "language": "Python", "typeref": "typename:Optional[dict[str,Any]]", "kind": "function", "signature": "(conn: sqlite3.Connection, email_norm: str)"}, {"_type": "tag", "name": "auth_get_user_by_id", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def auth_get_user_by_id(conn: sqlite3.Connection, user_id: str) -> Optional[dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[dict[str,Any]]", "kind": "function", "signature": "(conn: sqlite3.Connection, user_id: str)"}, {"_type": "tag", "name": "auth_insert_user", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def auth_insert_user(conn: sqlite3.Connection, rec: dict[str, Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection, rec: dict[str, Any])"}, {"_type": "tag", "name": "execute", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def execute(conn: sqlite3.Connection, query: str, params: Iterable[Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection, query: str, params: Iterable[Any])"}, {"_type": "tag", "name": "fetch_all", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def fetch_all(conn: sqlite3.Connection, query: str, params: Iterable[Any]) -> list[dict[str, Any/", "language": "Python", "typeref": "typename:list[dict[str,Any]]", "kind": "function", "signature": "(conn: sqlite3.Connection, query: str, params: Iterable[Any])"}, {"_type": "tag", "name": "fetch_one", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def fetch_one(conn: sqlite3.Connection, query: str, params: Iterable[Any]) -> Optional[dict[str,/", "language": "Python", "typeref": "typename:Optional[dict[str,Any]]", "kind": "function", "signature": "(conn: sqlite3.Connection, query: str, params: Iterable[Any])"}, {"_type": "tag", "name": "get_conn", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def get_conn():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "reset_users_table", "path": "/home/kavia/workspace/code-generation/career-path-navigator-41368-41378/career_navigator_backend/src/db/sqlite.py", "pattern": "/^def reset_users_table() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "9bfc3a1fab1d67bce9137c90fd9569a1", "format-version": 4, "code-base-name": "career_navigator_backend", "filename": "career_navigator_backend/src/db/sqlite.py"}